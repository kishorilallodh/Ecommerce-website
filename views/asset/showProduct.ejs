<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product List</title>
     <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  
  </head>
  <body>
    <%- include('../includes/navbar.ejs') %>

 <div class="flex flex-wrap justify-center gap-5 p-5">
  <% products.forEach(product => { %>
    <a href="/product/<%= product._id %>" class="no-underline text-inherit">
      <div class="w-[280px] bg-white border border-gray-200 rounded-lg shadow-md overflow-hidden transform transition-transform duration-300 hover:scale-[1.03]">
        <div class="w-full">
          <img src="/<%= product.pimage %>" alt="<%= product.pname %>" class="w-full h-auto block" />
        </div>
        <div class="p-4 text-left">
          <h4 class="text-sm font-semibold text-gray-800 mb-2"><%= product.pname %></h4>
          <div class="flex items-center gap-5">
            <p class="text-pink-600 text-base font-semibold m-0">â‚¹ <%= product.pprice %></p>
            <p class="text-green-600 text-sm m-0"><%= product.pdisct %>% OFF</p>
          </div>
        </div>
      </div>
    </a>
  <% }) %>
</div>

<div class="flex justify-center items-center gap-2 my-8 flex-wrap">
  <% if (totalPages > 1) { %>

    <% if (currentPage > 1) { %>
      <a href="/showproduct/?page=<%= currentPage-1 %>"
         class="min-w-[80px] text-center px-4 py-2 text-sm font-medium text-gray-800 bg-gray-100 border border-gray-300 rounded hover:bg-blue-600 hover:text-white transition">
        Previous
      </a>
    <% } else { %>
      <a href="#"
         class="min-w-[80px] text-center px-4 py-2 text-sm font-medium text-gray-500 bg-gray-100 border border-gray-300 rounded cursor-not-allowed">
        Previous
      </a>
    <% } %>

    <% for (let i = 1; i <= totalPages; i++) { %>
      <% if (i === currentPage) { %>
        <span
          class="px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-blue-600 rounded">
          <%= i %>
        </span>
      <% } else { %>
        <a href="/showproduct/?page=<%= i %>"
           class="px-4 py-2 text-sm font-medium text-gray-800 bg-gray-100 border border-gray-300 rounded hover:bg-gray-200 transition">
          <%= i %>
        </a>
      <% } %>
    <% } %>

    <% if (currentPage < totalPages) { %>
      <a href="/showproduct/?page=<%= currentPage+1 %>"
         class="min-w-[80px] text-center px-4 py-2 text-sm font-medium text-gray-800 bg-gray-100 border border-gray-300 rounded hover:bg-blue-600 hover:text-white transition">
        Next
      </a>
    <% } else { %>
      <a href="#"
         class="min-w-[80px] text-center px-4 py-2 text-sm font-medium text-gray-500 bg-gray-100 border border-gray-300 rounded cursor-not-allowed">
        Next
      </a>
    <% } %>

  <% } %>
</div>


    <%- include('../includes/footer.ejs') %>
  </body>
</html>
